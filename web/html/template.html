<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
        />
        <meta http-equiv="ScreenOrientation" content="autoRotate:disabled" />
        <title>Ш А Р А Г А</title>
    </head>
    <body class="body-medium background on-background-text">
        <noscript>
            Please enable JavaScript to continue using this application.
        </noscript>
        Идёт запуск...<br />
        Если вы на этом экране слишком долго, и нет сообщения об ошибке,
        убедитесь что ваше устройство не является устаревшим.
        <div id="errorcontacts" style="display: none">
            <p>
                Произошла ошибка при запуске. Можно попробовать сбросить кэши.
            </p>
            <button id="cacheNuke">Сброс кэшей</button>
            <p>
                Если ошибки продолжаются, и у вас нормальное (не устаревшее)
                устройство и браузер, то напишите
                <a href="https://t.me/mrvn4">мне</a>
            </p>
        </div>
        <script type="text/javascript">
            document.getElementById("cacheNuke").onclick = async function () {
                const cacheKeys = await caches.keys();
                for (const key of cacheKeys) {
                    await caches.delete(key);
                }
                alert("Кэши были сброшены. Страница будет перезагружена.");
                location.reload();
            };
            window.onerror = function (e) {
                alert(`Ошибка в ранней стадии запуска: ${e}`);
                document.getElementById("errorcontacts").style.display =
                    "unset";
                return false;
            };
        </script>
    </body>
</html>
